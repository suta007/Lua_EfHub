--workspace.Farm.Farm.Important.Plants_Physical["Elder Strawberry"].Fruits:GetChildren()[2]["2"].ProximityPrompt
local Fluent = loadstring(
	game:HttpGet("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau")
)()

local Window = Fluent:CreateWindow({
	Title = "Console Log",
	SubTitle = "by EfHub",
	TabWidth = 0,
	Size = UDim2.fromOffset(1200, 768),
	Resize = true,
	-- MinSize = Vector2.new(470, 380),
	Acrylic = true,
	Theme = "Darker",
	MinimizeKey = Enum.KeyCode.RightControl,
})

local Tabs = {
	Main = Window:AddTab({ Title = "Log Console", Icon = "terminal" }),
}

Window:SelectTab(1)

------------------------------------------------------
-- 1. à¸›à¸£à¸°à¸à¸²à¸¨à¸•à¸±à¸§à¹à¸›à¸£à¸£à¸°à¸šà¸š (à¸ˆà¸­à¸‡à¸—à¸µà¹ˆà¹„à¸§à¹‰à¸à¹ˆà¸­à¸™)
------------------------------------------------------
local MaxLines = 100 -- à¸ˆà¸³à¸™à¸§à¸™à¸šà¸£à¸£à¸—à¸±à¸”à¸—à¸µà¹ˆà¸ˆà¸°à¹‚à¸Šà¸§à¹Œ
local MaxFullHistory = 1000 -- à¸ˆà¸³à¸™à¸§à¸™à¸šà¸£à¸£à¸—à¸±à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸‚à¸­à¸‡à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
local DisplayTable = {} -- à¸•à¸²à¸£à¸²à¸‡à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹‚à¸Šà¸§à¹Œ
local FullHistoryTable = {} -- à¸•à¸²à¸£à¸²à¸‡à¹€à¸à¹‡à¸šà¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
local IsPaused = false

-- [à¸ªà¸³à¸„à¸±à¸] à¸›à¸£à¸°à¸à¸²à¸¨à¸•à¸±à¸§à¹à¸›à¸£ LogDisplay à¹„à¸§à¹‰à¸à¹ˆà¸­à¸™ à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸›à¸¸à¹ˆà¸¡à¸£à¸¹à¹‰à¸ˆà¸±à¸à¸•à¸±à¸§à¹à¸›à¸£à¸™à¸µà¹‰
local LogDisplay = nil

------------------------------------------------------
-- 2. à¸ªà¸£à¹‰à¸²à¸‡à¸›à¸¸à¹ˆà¸¡à¸„à¸§à¸šà¸„à¸¸à¸¡ (à¸­à¸¢à¸¹à¹ˆà¸”à¹‰à¸²à¸™à¸šà¸™)
------------------------------------------------------

-- à¸›à¸¸à¹ˆà¸¡à¸«à¸¢à¸¸à¸” (Pause)
Tabs.Main:AddToggle("PauseSwitch", {
	Title = "Pause Logging",
	Default = false,
	Callback = function(Value)
		IsPaused = Value
	end,
})

-- à¸›à¸¸à¹ˆà¸¡ Copy All
Tabs.Main:AddButton({
	Title = "Copy All Logs",
	--Description = "à¸„à¸±à¸”à¸¥à¸­à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸¥à¸‡ Clipboard",
	Callback = function()
		if setclipboard then
			setclipboard(table.concat(FullHistoryTable, "\n"))
			Fluent:Notify({ Title = "Success", Content = "Copied all logs!", Duration = 2 })
		else
			Fluent:Notify({ Title = "Error", Content = "Executor not supported", Duration = 2 })
		end
	end,
})

-- à¸›à¸¸à¹ˆà¸¡ Clear
Tabs.Main:AddButton({
	Title = "Clear Logs",
	Callback = function()
		DisplayTable = {}
		FullHistoryTable = {}
		if LogDisplay then
			LogDisplay:SetValue("") -- à¸•à¸­à¸™à¸™à¸µà¹‰à¸›à¸¸à¹ˆà¸¡à¸ˆà¸°à¸£à¸¹à¹‰à¸ˆà¸±à¸ LogDisplay à¹à¸¥à¹‰à¸§
		end
	end,
})

------------------------------------------------------
-- 3. à¸ªà¸£à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹à¸ªà¸”à¸‡à¸œà¸¥ (à¸­à¸¢à¸¹à¹ˆà¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡)
------------------------------------------------------

-- à¸ªà¸£à¹‰à¸²à¸‡ Paragraph à¹à¸¥à¹‰à¸§à¹€à¸­à¸²à¹„à¸›à¹ƒà¸ªà¹ˆà¹ƒà¸™à¸•à¸±à¸§à¹à¸›à¸£à¸—à¸µà¹ˆà¸ˆà¸­à¸‡à¹„à¸§à¹‰
LogDisplay = Tabs.Main:AddParagraph("LogDisplay", {
	Title = "Recent Logs",
	Content = "System initialized...",
})

------------------------------------------------------
-- 4. à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™ AddLog
------------------------------------------------------
local function AddLog(message)
	if IsPaused then
		return
	end
	local entry = message
	-- à¹€à¸à¹‡à¸šà¸¥à¸‡à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
	table.insert(FullHistoryTable, entry)
	if #FullHistoryTable > MaxFullHistory then
		table.remove(FullHistoryTable, 1)
	end

	-- à¹€à¸à¹‡à¸šà¸¥à¸‡à¸•à¸²à¸£à¸²à¸‡à¹à¸ªà¸”à¸‡à¸œà¸¥ (à¸ˆà¸³à¸à¸±à¸”à¸šà¸£à¸£à¸—à¸±à¸”)
	table.insert(DisplayTable, entry)
	if #DisplayTable > MaxLines then
		table.remove(DisplayTable, 1)
	end

	-- à¸­à¸±à¸›à¹€à¸”à¸•à¸«à¸™à¹‰à¸²à¸ˆà¸­
	if LogDisplay then
		local TempText = ""
		TempText = table.concat(DisplayTable, "\n")
		LogDisplay:SetValue(TempText)
	end
end
------------------------------------------------------
-- 5. [NEW] à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸ªà¸£à¸´à¸¡ (Wrapper Functions) à¸—à¸µà¹ˆà¸žà¸µà¹ˆà¹€à¸­à¸Ÿà¸•à¹‰à¸­à¸‡à¸à¸²à¸£
------------------------------------------------------
local function InfoLog(message)
	AddLog("ðŸ“‹ " .. message)
end

local function WarnLog(message)
	AddLog("âš ï¸ " .. message)
end

local function ErrorLog(message)
	AddLog("âŒ " .. message)
end

local function SuccessLog(message)
	AddLog("âœ… " .. message)
end

local function TimeLog(message)
	local timestamp = os.date("%X")
	local entry = string.format("[%s] %s", timestamp, message)
	AddLog(entry)
end
------------------------------------------------------
-- 6. Test Loop (à¸—à¸”à¸ªà¸­à¸šà¸”à¸¹à¸„à¸§à¸²à¸¡à¸ªà¸§à¸¢à¸‡à¸²à¸¡)
------------------------------------------------------
InfoLog("Script initialized successfully.")
task.wait(0.5)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local MyName = LocalPlayer.Name
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CollectEvent = ReplicatedStorage.GameEvents.Crops.Collect --  à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡à¸ˆà¸²à¸à¸šà¸£à¸£à¸—à¸±à¸” 87
local GetMyFarm
local CollectFruit
local CheckFruit

local CollectFruitEnable = true

local CheckFruitType = true
local FruitType = { "Apple", "Elder Strawberry" }
local ExceptFruitType = false

local CheckMutant = true
local MutantType = { "Firework", "Wet" }
local ExceptMutant = false

local CheckVariant = true
local VariantType = "Normal" -- à¹ƒà¸ªà¹ˆà¸Šà¸·à¹ˆà¸­ Variant à¸—à¸µà¹ˆ
local ExceptVariant = false

local CheckWeight = true
local WeightType = "more" -- "more" or "less"
local WeightValue = 100

GetMyFarm = function()
	local farmFolder = workspace:FindFirstChild("Farm")
	if not farmFolder then
		return nil
	end
	for _, oFarm in pairs(farmFolder:GetChildren()) do
		local success, owner = pcall(function()
			return oFarm.Important.Data.Owner.Value
		end)

		if success and owner == MyName then
			return oFarm
		end
	end
	return nil
end
--Collect Fruits

CheckFruit = function(model)
	local cType = false
	local cMutant = false
	local cVariant = false
	local cWeight = false

	if model:IsA("Model") then
		if CheckFruitType then
			local tFruitType = model.Name
			if table.find(FruitType, tFruitType) then
				if ExceptFruitType then
					cType = false
				else
					cType = true
				end
			else
				if ExceptFruitType then
					cType = true
				else
					cType = false
				end
			end
		else
			cType = true
		end

		if CheckMutant then
			local mHas = false
			for _, v in pairs(MutantType) do
				if model:GetAttribute(v) == true then
					mHas = true
					break
				end
			end
			if mHas then
				if ExceptMutant then
					cMutant = false
				else
					cMutant = true
				end
			else
				if ExceptMutant then
					cMutant = true
				else
					cMutant = false
				end
			end
		else
			cMutant = true
		end

		if CheckVariant then
			local tVariant = model:FindFirstChild("Weight").Variant
			if tVariant == VariantType then
				if ExceptVariant then
					cVariant = false
				else
					cVariant = true
				end
			else
				if ExceptVariant then
					cVariant = true
				else
					cVariant = false
				end
			end
		else
			cVariant=true
		end

		if CheckWeight then
			local tWeight = model:FindFirstChild("Weight").Value
			if WeightType == "more" then
				if tWeight >= WeightValue then
					cWeight = true
				end
			elseif WeightType == "less" then
				if tWeight < WeightValue then
					cWeight = true
				end
			end
		else
			cWeight=true
		end
	end
	return cType and cMutant and cVariant and cWeight
end




CheckFruit = function(model)
    -- 1. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹€à¸šà¸·à¹‰à¸­à¸‡à¸•à¹‰à¸™à¸§à¹ˆà¸²à¹€à¸›à¹‡à¸™ Model à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
    if not model:IsA("Model") then return false end

    -- 2. à¸ªà¹ˆà¸§à¸™à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸Šà¸™à¸´à¸”à¸œà¸¥à¹„à¸¡à¹‰ (Fruit Type)
    if CheckFruitType then
        local tFruitType = model.Name
        local isFound = table.find(FruitType, tFruitType) ~= nil
        
        -- à¸•à¸£à¸£à¸à¸°: à¸«à¸²à¸ "à¹€à¸ˆà¸­" à¹à¸¥à¸° "à¸¢à¸à¹€à¸§à¹‰à¸™" à¸¡à¸µà¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¹€à¸«à¸¡à¸·à¸­à¸™à¸à¸±à¸™ (à¹€à¸Šà¹ˆà¸™ à¹€à¸ˆà¸­à¹à¸¥à¸°à¸ªà¸±à¹ˆà¸‡à¸¢à¸à¹€à¸§à¹‰à¸™) à¸–à¸·à¸­à¸§à¹ˆà¸²à¹„à¸¡à¹ˆà¸œà¹ˆà¸²à¸™
        if isFound == ExceptFruitType then 
            return false 
        end
    end

    -- 3. à¸ªà¹ˆà¸§à¸™à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¸à¸¥à¸²à¸¢à¸žà¸±à¸™à¸˜à¸¸à¹Œ (Mutant)
    if CheckMutant then
        local hasMutant = false
        -- à¸§à¸™à¸¥à¸¹à¸›à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Attribute à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”
        for _, v in pairs(MutantType) do
            if model:GetAttribute(v) == true then
                hasMutant = true
                break
            end
        end
        
        if hasMutant == ExceptMutant then 
            return false 
        end
    end

    -- 4. à¸ªà¹ˆà¸§à¸™à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸£à¸¹à¸›à¹à¸šà¸šà¸¢à¹ˆà¸­à¸¢ (Variant)
    if CheckVariant then
        local weightObj = model:FindFirstChild("Weight")
        -- à¹€à¸žà¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢: à¸«à¸²à¸à¹„à¸¡à¹ˆà¸žà¸š Object Weight à¹ƒà¸«à¹‰à¸„à¸·à¸™à¸„à¹ˆà¸² false (à¸«à¸£à¸·à¸­à¸›à¸£à¸±à¸šà¸•à¸²à¸¡à¸„à¸§à¸²à¸¡à¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡)
        if not weightObj then return false end

        local tVariant = weightObj.Variant
        local isVariantMatch = (tVariant == VariantType)

        if isVariantMatch == ExceptVariant then 
            return false 
        end
    end

    -- 5. à¸ªà¹ˆà¸§à¸™à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸™à¹‰à¸³à¸«à¸™à¸±à¸ (Weight)
    if CheckWeight then
        local weightObj = model:FindFirstChild("Weight")
        if not weightObj then return false end
        
        local tWeight = weightObj.Value
        
        if WeightType == "more" then
            if not (tWeight >= WeightValue) then return false end
        elseif WeightType == "less" then
            if not (tWeight < WeightValue) then return false end
        end
    end

    -- à¸«à¸²à¸à¸œà¹ˆà¸²à¸™à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸—à¸¸à¸à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ à¹ƒà¸«à¹‰à¸–à¸·à¸­à¸§à¹ˆà¸²à¹€à¸›à¹‡à¸™à¸ˆà¸£à¸´à¸‡
    return true
end

CollectFruit = function()
	local MyFarm = GetMyFarm()

	local Farm_Important = MyFarm:FindFirstChild("Important")
	local Plants_Physical = Farm_Important and Farm_Important:FindFirstChild("Plants_Physical")

	if Plants_Physical then
		for _, plant in pairs(Plants_Physical:GetChildren()) do
			local Fruits = plant:FindFirstChild("Fruits")
			if Fruits then
				for _, fruit in pairs(Fruits:GetChildren()) do
					if fruit:IsA("Model") then
						local Prompt_Part = fruit:FindFirstChild("2")

						if Prompt_Part then
							local Prompt = Prompt_Part:FindFirstChild("ProximityPrompt")
							if Prompt and Prompt.Enabled then
								-- AddLog("Auto Collect: " .. fruit.Name)

								CheckFruit(fruit)
								--if CheckFruit(fruit) then
								--CollectEvent:FireServer({ fruit })
								--end
							end
						end
					end
				end
			end
		end
	end
end

CollectFruit()
