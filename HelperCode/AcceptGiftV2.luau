local Players = game:GetService("Players")
local VirtualInputManager = game:GetService("VirtualInputManager")
local GuiService = game:GetService("GuiService")
local LocalPlayer = Players.LocalPlayer

local giftGui = LocalPlayer:WaitForChild("PlayerGui"):WaitForChild("Gift_Notification")
local mainFrame = giftGui:WaitForChild("Frame")

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô: ‡∏ã‡πà‡∏≠‡∏ô UI ‡∏≠‡∏∑‡πà‡∏ô -> ‡∏™‡∏±‡πà‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡πâ‡∏ß‡∏¢ VIM -> ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ UI
local function clearPathAndClick(button)
	local playerGui = LocalPlayer.PlayerGui
	local hiddenGuis = {}

	-- 1. ‡∏ã‡πà‡∏≠‡∏ô UI ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏¥‡∏î UI ‡∏ó‡∏µ‡πà‡∏ó‡∏±‡∏ö‡∏≠‡∏¢‡∏π‡πà)
	for _, gui in pairs(playerGui:GetChildren()) do
		if gui:IsA("ScreenGui") and gui.Name ~= "Gift_Notification" and gui.Enabled == true then
			gui.Enabled = false
			table.insert(hiddenGuis, gui)
		end
	end

	-- 2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏õ‡∏∏‡πà‡∏° (‡∏ö‡∏ß‡∏Å GuiInset ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ 100%)
	local inset, _ = GuiService:GetGuiInset()
	local x = button.AbsolutePosition.X + (button.AbsoluteSize.X / 2)
	local y = button.AbsolutePosition.Y + (button.AbsoluteSize.Y / 2) + inset.Y

	print(
		"üñ±Ô∏è [VIM] ‡∏™‡∏±‡πà‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å Accept ‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏Å‡∏±‡∏î: X="
			.. math.floor(x)
			.. ", Y="
			.. math.floor(y)
	)

	-- 3. ‡∏¢‡∏¥‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏à‡∏≥‡∏•‡∏≠‡∏á
	VirtualInputManager:SendMouseButtonEvent(x, y, 0, true, game, 1) -- ‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏Å‡∏î‡∏•‡∏á
	task.wait(0.05)
	VirtualInputManager:SendMouseButtonEvent(x, y, 0, false, game, 1) -- ‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏õ‡∏•‡πà‡∏≠‡∏¢

	-- 4. ‡πÄ‡∏õ‡∏¥‡∏î UI ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏ß‡∏°‡∏≤‡∏Å‡∏à‡∏ô‡∏ï‡∏≤‡πÅ‡∏ó‡∏ö‡∏°‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô)
	for _, gui in ipairs(hiddenGuis) do
		gui.Enabled = true
	end
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô: ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
local function processGift(uiNode)
	task.spawn(function()
		local acceptBtn = nil
		local timeout = 0

		-- ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° Accept ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á (‡∏£‡∏≠‡∏ô‡∏≤‡∏ô‡∏™‡∏∏‡∏î 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
		while timeout < 30 do
			acceptBtn = uiNode:FindFirstChild("Accept", true)
			if acceptBtn then
				break
			end

			task.wait(0.1)
			timeout = timeout + 1
		end

		if acceptBtn then
			-- ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏´‡πâ UI ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏à‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏•‡∏≤‡∏î‡∏û‡∏¥‡∏Å‡∏±‡∏î)
			task.wait(0.2)

			-- ‡∏™‡∏±‡πà‡∏á‡πÅ‡∏´‡∏ß‡∏Å‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å
			clearPathAndClick(acceptBtn)
			print("‚úÖ [Success] ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!")
		else
			print("‚ùå [Error] ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Accept ‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î")
		end
	end)
end

-- ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà
mainFrame.ChildAdded:Connect(function(child)
	processGift(child)
end)

-- ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå
for _, child in pairs(mainFrame:GetChildren()) do
	processGift(child)
end

print("üöÄ ‡∏£‡∏∞‡∏ö‡∏ö VIM Auto-Accept (Fast & Clean) ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ñ‡πà‡∏∞‡∏û‡∏µ‡πà‡πÄ‡∏≠‡∏ü!")
